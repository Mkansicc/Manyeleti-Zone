<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nazarene Revival Church | Manyeleti Zone (2026 Programme)</title>
  <meta name="description" content="Nazarene Revival Church - Manyeleti Zone. 2026 programme, committees, members, and WhatsApp contact." />

  <style>
    :root{
      --bg:#f6f8fb; --card:#fff; --text:#0f172a; --muted:#64748b;
      --border:#e2e8f0; --brand:#2563eb; --brand2:#0ea5e9;
      --shadow:0 12px 30px rgba(2,6,23,.08); --radius:18px;
      --ok:#16a34a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans";
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(37,99,235,.10), transparent 55%),
        radial-gradient(900px 500px at 85% 15%, rgba(14,165,233,.10), transparent 55%),
        var(--bg);
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:22px}

    /* Top bar */
    .topbar{
      position:sticky;top:0;z-index:50;
      backdrop-filter:blur(10px);
      background:rgba(246,248,251,.72);
      border-bottom:1px solid rgba(226,232,240,.8);
    }
    .topbar-inner{display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand{display:flex;align-items:center;gap:12px;min-width:240px}
    .logo{
      width:44px;height:44px;border-radius:14px;
      background:linear-gradient(135deg,var(--brand),var(--brand2));
      display:grid;place-items:center;color:#fff;font-weight:900;
      box-shadow:0 10px 22px rgba(37,99,235,.25);
      flex:0 0 auto;
    }
    .brand h1{font-size:14px;line-height:1.2;margin:0;letter-spacing:.2px}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}

    /* Main nav tabs */
    .tabs{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .tab-btn{
      border:1px solid var(--border);background:#fff;
      padding:10px 12px;border-radius:999px;
      font-weight:800;font-size:13px;color:#0b1220;cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .tab-btn:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(2,6,23,.06)}
    .tab-btn.active{
      border-color:rgba(37,99,235,.35);
      box-shadow:0 12px 26px rgba(37,99,235,.15);
      background:linear-gradient(135deg,rgba(37,99,235,.10),rgba(14,165,233,.10));
    }

    /* Hero */
    .hero{
      margin-top:18px;
      border:1px solid var(--border);
      background:linear-gradient(135deg, rgba(37,99,235,.10), rgba(14,165,233,.08)), var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero-inner{
      padding:22px;
      display:grid;
      grid-template-columns:1.25fr .75fr;
      gap:16px;align-items:center;
    }
    .hero h2{margin:0 0 6px;font-size:22px;letter-spacing:.2px}
    .hero p{margin:0;color:var(--muted);line-height:1.5;font-size:14px}
    .hero-badges{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(226,232,240,.9);
      background:rgba(255,255,255,.75);
      font-weight:800;font-size:12px;color:#0b1220;
    }
    .hero-card{
      background:rgba(255,255,255,.75);
      border:1px solid rgba(226,232,240,.9);
      border-radius:18px;padding:14px;
    }
    .hero-card .small{color:var(--muted);font-size:12px;margin:0 0 6px}
    .hero-card .big{font-size:16px;font-weight:900;margin:0 0 10px}
    .btn-row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      border:1px solid var(--border);background:#fff;
      padding:10px 12px;border-radius:12px;
      font-weight:900;cursor:pointer;font-size:13px;
      display:inline-flex;align-items:center;gap:10px;
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 12px 26px rgba(2,6,23,.08)}
    .btn.primary{
      border-color:rgba(37,99,235,.35);
      background:linear-gradient(135deg,rgba(37,99,235,.14),rgba(14,165,233,.14));
    }
    .btn.whatsapp{
      border-color:rgba(22,163,74,.35);
      background:linear-gradient(135deg,rgba(22,163,74,.14),rgba(16,185,129,.12));
    }

    /* Sections */
    .section{
      margin-top:18px;
      border:1px solid var(--border);
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .section-head{
      padding:16px 18px;
      border-bottom:1px solid var(--border);
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .section-head h3{margin:0;font-size:16px;letter-spacing:.2px}
    .section-head p{margin:0;color:var(--muted);font-size:12px}
    .section-body{padding:16px 18px 18px}

    /* Programme controls */
    .controls{
      display:flex;gap:10px;flex-wrap:wrap;
      align-items:center;justify-content:space-between;
      margin-bottom:12px;
    }
    .control-left{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .input,.select{
      border:1px solid var(--border);background:#fff;
      border-radius:12px;padding:10px 12px;
      font-weight:800;font-size:13px;color:#0b1220;
      min-width:220px;outline:none;
    }
    .select{min-width:190px;cursor:pointer}
    .hint{font-size:12px;color:var(--muted)}
    .muted{color:var(--muted)}
    .strong{font-weight:900}
    .hide{display:none!important}

    /* Programme cards */
    .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .event{
      grid-column:span 6;
      border:1px solid var(--border);
      border-radius:16px;
      padding:14px;
      background:linear-gradient(135deg,rgba(2,6,23,.02),rgba(2,6,23,0)),#fff;
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .event:hover{transform:translateY(-1px);box-shadow:0 16px 30px rgba(2,6,23,.08)}
    .event-top{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;margin-bottom:10px}
    .event h4{margin:0;font-size:14px}
    .event .meta{margin:4px 0 0;color:var(--muted);font-size:12px;line-height:1.35}
    .pill{
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(226,232,240,.95);
      background:rgba(37,99,235,.07);
      font-weight:900;font-size:12px;white-space:nowrap;
    }
    .event-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

    /* Mini buttons */
    .mini{
      padding:9px 10px;border-radius:12px;
      font-weight:900;font-size:12px;
      border:1px solid var(--border);
      background:#fff;cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
    }
    .mini.whats{border-color:rgba(22,163,74,.35);background:rgba(22,163,74,.08)}
    .mini.info{border-color:rgba(37,99,235,.35);background:rgba(37,99,235,.08)}

    /* Committee filter tabs */
    .subtabs{
      display:flex;gap:10px;flex-wrap:wrap;
      align-items:center;justify-content:space-between;
      margin-bottom:12px;
    }
    .subtab-left{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .subtab-btn{
      border:1px solid var(--border);
      background:#fff;
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .subtab-btn:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(2,6,23,.06)}
    .subtab-btn.active{
      border-color:rgba(37,99,235,.35);
      background:linear-gradient(135deg,rgba(37,99,235,.12),rgba(14,165,233,.10));
      box-shadow:0 12px 26px rgba(37,99,235,.12);
    }
    .committee-card{
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
      background:#fff;
      box-shadow:0 10px 22px rgba(2,6,23,.06);
    }
    .committee-head{
      padding:14px 14px 12px;
      border-bottom:1px solid var(--border);
      display:flex;align-items:flex-start;justify-content:space-between;gap:10px;
      background:linear-gradient(135deg,rgba(37,99,235,.08),rgba(14,165,233,.06));
    }
    .committee-head h4{margin:0;font-size:14px}
    .committee-head p{margin:4px 0 0;color:var(--muted);font-size:12px;line-height:1.35}
    .committee-body{padding:14px}
    .table-wrap{overflow-x:auto}
    table.clean{
      width:100%;
      border-collapse:collapse;
      min-width:520px;
    }
    table.clean th, table.clean td{
      border:1px solid var(--border);
      padding:10px 10px;
      text-align:left;
      vertical-align:top;
      font-size:13px;
    }
    table.clean th{
      background:#f1f5f9;
      font-weight:900;
      font-size:12px;
      letter-spacing:.2px;
    }

    /* People cards */
    .people{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .person{
      grid-column:span 4;
      border:1px solid var(--border);
      border-radius:16px;
      padding:14px;background:#fff;
    }
    .person .avatar{
      width:44px;height:44px;border-radius:14px;
      display:grid;place-items:center;font-weight:900;color:#0b1220;
      background:linear-gradient(135deg,rgba(37,99,235,.14),rgba(14,165,233,.12));
      border:1px solid rgba(37,99,235,.20);
      margin-bottom:10px;
    }
    .person h4{margin:0 0 4px;font-size:14px}
    .person p{margin:0;color:var(--muted);font-size:12px;line-height:1.45}
    .person .actions{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}

    /* Responsive */
    @media (max-width:920px){
      .hero-inner{grid-template-columns:1fr}
      .tabs{justify-content:flex-start}
      .brand{min-width:auto}
      .event{grid-column:span 12}
      .person{grid-column:span 6}
    }
    @media (max-width:620px){
      .input,.select{min-width:100%}
      .person{grid-column:span 12}
    }

    footer{padding:26px 0 40px;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>

<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true">NRC</div>
        <div>
          <h1>Nazarene Revival Church ‚Ä¢ Manyeleti Zone</h1>
          <p>2026 Year Programme ‚Ä¢ Committees ‚Ä¢ Members ‚Ä¢ WhatsApp</p>
        </div>
      </div>

      <nav class="tabs" aria-label="Main navigation">
        <button class="tab-btn active" data-tab="tab-programme">Programme</button>
        <button class="tab-btn" data-tab="tab-committees">Committees</button>
        <button class="tab-btn" data-tab="tab-members">Zone Members</button>
        <button class="tab-btn" data-tab="tab-contact">Contact</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-inner">
        <div>
          <h2>Manyeleti Zone ‚Äî 2026 Conferences & Programme</h2>
          <p>
            View the yearly programme, filter committees, and contact the chairperson quickly on WhatsApp.
          </p>
          <div class="hero-badges">
            <span class="badge">üìÖ Year Programme</span>
            <span class="badge">üßë‚Äçü§ù‚Äçüßë Committees</span>
            <span class="badge">üí¨ WhatsApp</span>
          </div>
        </div>

        <div class="hero-card">
          <p class="small">Quick action</p>
          <p class="big">Need more info?</p>
          <div class="btn-row">
            <button class="btn primary" id="btnGoProgramme">üìå View programme</button>
            <button class="btn whatsapp" id="btnWhatsAppChair">üü¢ WhatsApp Chairperson</button>
          </div>
          <p class="small" style="margin-top:10px;">
            Change the WhatsApp number in the script (CHAIRPERSON_WHATSAPP).
          </p>
        </div>
      </div>
    </section>

    <!-- TAB: PROGRAMME -->
    <section class="section" id="tab-programme">
      <div class="section-head">
        <div>
          <h3>Year Programme (All Conferences)</h3>
          <p>Search, filter, and tap ‚ÄúMore Info‚Äù to WhatsApp</p>
        </div>
        <div class="hint"><span class="strong" id="countEvents">0</span> events</div>
      </div>

      <div class="section-body">
        <div class="controls">
          <div class="control-left">
            <input class="input" id="searchInput" placeholder="Search: location, type, month..." />
            <select class="select" id="typeFilter">
              <option value="All">All types</option>
            </select>
            <select class="select" id="locationFilter">
              <option value="All">All locations</option>
            </select>
          </div>
          <div class="hint" id="filterHint">Showing all events</div>
        </div>

        <div class="cards" id="eventsGrid"></div>
      </div>
    </section>

    <!-- TAB: COMMITTEES (FILTER TABS + 2-COLUMN TABLE) -->
    <section class="section hide" id="tab-committees">
      <div class="section-head">
        <div>
          <h3>Committees</h3>
          <p>Select a committee to view leadership (Position + Full name)</p>
        </div>
        <div class="hint" id="committeeCountHint">4 committees</div>
      </div>

      <div class="section-body">
        <div class="subtabs">
          <div class="subtab-left" id="committeeTabs"></div>
          <div class="hint">Tip: tap tabs to filter</div>
        </div>

        <div class="committee-card" id="committeeCard">
          <div class="committee-head">
            <div>
              <h4 id="committeeTitle">Youth Committee</h4>
              <p id="committeeDesc">Leadership structure</p>
            </div>
            <a class="mini whats" id="committeeWhats" href="#" target="_blank" rel="noopener">üü¢ More Info</a>
          </div>

          <div class="committee-body">
            <div class="table-wrap">
              <table class="clean" aria-label="Committee leadership table">
                <thead>
                  <tr>
                    <th style="width:40%;">Position</th>
                    <th>Full name</th>
                  </tr>
                </thead>
                <tbody id="committeeTableBody"></tbody>
              </table>
            </div>

            <p class="hint" style="margin-top:10px;">
              You can edit committee names, positions, and members inside the script.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- TAB: MEMBERS -->
    <section class="section hide" id="tab-members">
      <div class="section-head">
        <div>
          <h3>Zone Committee Members</h3>
          <p>Names and roles (editable)</p>
        </div>
        <div class="hint">Add photos later if you want</div>
      </div>

      <div class="section-body">
        <div class="people" id="membersGrid"></div>
      </div>
    </section>

    <!-- TAB: CONTACT -->
    <section class="section hide" id="tab-contact">
      <div class="section-head">
        <div>
          <h3>Contact & WhatsApp</h3>
          <p>Tap to message the chairperson</p>
        </div>
        <div class="hint">Works on phone + WhatsApp Web on PC</div>
      </div>

      <div class="section-body">
        <div style="border:1px solid var(--border); border-radius:16px; overflow:hidden;">
          <div style="display:grid; grid-template-columns:1.1fr 1fr 1fr auto; gap:10px; padding:12px; align-items:center;">
            <div>
              <div class="strong">Chairperson (Manyeleti Zone)</div>
              <div class="hint" id="chairNumberPreview">WhatsApp: (set your number in code)</div>
            </div>
            <div>
              <div class="strong">Help</div>
              <div class="hint">Programme, venues, transport, updates</div>
            </div>
            <div>
              <div class="strong">Hours</div>
              <div class="hint">Anytime (reply when available)</div>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
              <button class="mini whats" id="btnWhatsAppChair2">üü¢ WhatsApp</button>
              <button class="mini info" id="btnCopyLink">üîó Copy WhatsApp Link</button>
            </div>
          </div>
        </div>

        <p class="hint" style="margin-top:12px;">
          Number format example: <span class="strong">27826944747</span> (no +, no spaces). South Africa = 27.
        </p>
      </div>
    </section>

    <footer>
      ¬© <span id="yearNow"></span> Nazarene Revival Church ‚Ä¢ Manyeleti Zone
    </footer>
  </main>

  <script>
    /***********************
     * EDIT THESE DETAILS  *
     ***********************/
    const CHAIRPERSON_NAME = "Chairperson";
    const CHAIRPERSON_WHATSAPP = "27826944747"; // <-- CHANGE THIS (no +, no spaces)
    const DEFAULT_WHATSAPP_MESSAGE =
      "Good day Chairperson. I need more information about the Manyeleti Zone programme (2026). Please assist.";

    // Programme (sorted)
    const events = [
      { order: 1,  dateLabel: "21 March",       dateSort: "2026-03-21", dateSpan: "21 March 2026",       type: "Youth Conference",      location: "Share" },
      { order: 2,  dateLabel: "18 April",       dateSort: "2026-04-18", dateSpan: "18 April 2026",       type: "Mother‚Äôs Conference",   location: "Hluvukani" },
      { order: 3,  dateLabel: "23 May",         dateSort: "2026-05-23", dateSpan: "23 May 2026",         type: "Children‚Äôs Conference", location: "Ludlow" },
      { order: 4,  dateLabel: "30 May",         dateSort: "2026-05-30", dateSpan: "30 May 2026",         type: "Zonal Conference",      location: "Ludlow" },
      { order: 5,  dateLabel: "10‚Äì13 July",     dateSort: "2026-07-10", dateSpan: "10‚Äì13 July 2026",     type: "Youth Conference",      location: "Delani" },
      { order: 6,  dateLabel: "11 July",        dateSort: "2026-07-11", dateSpan: "11 July 2026",        type: "Mother‚Äôs Conference",   location: "Welverdiend A" },
      { order: 7,  dateLabel: "05 September",   dateSort: "2026-09-05", dateSpan: "05 September 2026",   type: "Zonal Conference",      location: "Tlhavekisa" },
      { order: 8,  dateLabel: "24 September",   dateSort: "2026-09-24", dateSpan: "24 September 2026",   type: "Youth Conference",      location: "Ludlow" },
      { order: 9,  dateLabel: "24 October",     dateSort: "2026-10-24", dateSpan: "24 October 2026",     type: "Children‚Äôs Conference", location: "Welverdiend A" },
      { order: 10, dateLabel: "31 October",     dateSort: "2026-10-31", dateSpan: "31 October 2026",     type: "Mother‚Äôs Conference",   location: "Edinburg" },
      { order: 11, dateLabel: "03‚Äì06 December", dateSort: "2026-12-03", dateSpan: "03‚Äì06 December 2026", type: "Youth Conference",      location: "Welverdiend A" },
    ].sort((a,b) => a.dateSort.localeCompare(b.dateSort));

    // Committees (4 committees) ‚Äî filter tabs will show one at a time
    const committees = [
      {
        key: "youth",
        name: "Youth Committee",
        desc: "Youth leadership structure (Position + Full name)",
        whatsappMessage: "Good day. Please assist with Youth Committee information (Manyeleti Zone 2026).",
        members: [
          { position: "Chairperson",       name: "Mighty Mhlongo" },
          { position: "Vice Chairperson",  name: "Thato Monareng" },
          { position: "Secretary",         name: "Collen Mkansi" },
          { position: "Vice Secretary",    name: "Hlulani Ubisi" },
          { position: "Treasurer",         name: "Gusta Nxumalo" },
          { position: "Assist Treasure & Prayor Coordinator", name: "Glan Zitha" },
          { position: "Organizer", name: "Precious Godi" },
          { position: "Additional Member", name: "Brighter Mafumo" }
          { position: "Additional Member", name: "Modekai Ndlovu" },
          { position: "Additional Member", name: "Philadephia" },
          { position: "Director", name: "Ps Simon P Siwele"
        ]
      },
      {
        key: "mothers",
        name: "Mothers Committee",
        desc: "Mothers leadership structure (edit names in the script)",
        whatsappMessage: "Good day. Please assist with Mothers Committee information (Manyeleti Zone 2026).",
        members: [
          { position: "Chairperson",       name: "TBA" },
          { position: "Vice Chairperson",  name: "TBA" },
          { position: "Secretary",         name: "TBA" },
          { position: "Vice Secretary",    name: "TBA" },
          { position: "Treasurer",         name: "TBA" },
          { position: "Additional Member", name: "TBA" },
        ]
      },
      {
        key: "children",
        name: "Children‚Äôs Committee",
        desc: "Children‚Äôs leadership structure",
        whatsappMessage: "Good day. Please assist with Children‚Äôs Committee information (Manyeleti Zone 2026).",
        members: [
          { position: "Chairperson",       name: "Mrs Ndlovu " },
          { position: "Vice Chairperson",  name: "TBA" },
          { position: "Secretary",         name: "TBA" },
          { position: "Vice Secretary",    name: "TBA" },
          { position: "Treasurer",         name: "TBA" },
          { position: "Additional Member", name: "TBA" },
        ]
      },
      {
        key: "executive",
        name: "Zonal Executive",
        desc: "Zone executive leadership structure (edit names in the script)",
        whatsappMessage: "Good day. Please assist with Zonal Executive information (Manyeleti Zone 2026).",
        members: [
          { position: "Chairperson",       name: "Mrs Mkhomolo B" },
          { position: "Vice Chairperson",  name: "Mrs Mhlongo " },
          { position: "Secretary",         name: "TBA" },
          { position: "Vice Secretary",    name: "TBA" },
          { position: "Treasurer",         name: "TBA" },
          { position: "Additional Member", name: "TBA" },
        ]
      }
    ];

    // Zone members cards 
    const zoneMembers = [
      { name: "Name Surname", role: "Zone Chairperson", whatsapp: CHAIRPERSON_WHATSAPP },
      { name: "Name Surname", role: "Zone Secretary", whatsapp: CHAIRPERSON_WHATSAPP },
      { name: "Name Surname", role: "Zone Treasurer", whatsapp: CHAIRPERSON_WHATSAPP },
      { name: "Name Surname", role: "Youth Representative", whatsapp: CHAIRPERSON_WHATSAPP },
      { name: "Name Surname", role: "Mother‚Äôs Representative", whatsapp: CHAIRPERSON_WHATSAPP },
      { name: "Name Surname", role: "Children‚Äôs Representative", whatsapp: CHAIRPERSON_WHATSAPP },
    ];

    /***********************
     * HELPERS
     ***********************/
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function waLink(number, message){
      const clean = String(number || "").replace(/[^\d]/g,"");
      const text = encodeURIComponent(message || "");
      return `https://wa.me/${clean}?text=${text}`;
    }

    function initials(name){
      return (name || "")
        .split(" ")
        .filter(Boolean)
        .slice(0,2)
        .map(s => s[0].toUpperCase())
        .join("");
    }

    function monthNameFromISO(iso){
      const d = new Date(iso + "T00:00:00");
      return d.toLocaleString(undefined, { month:"long" });
    }

    /***********************
     * MAIN TABS
     ***********************/
    function openTab(tabId){
      $$(".tab-btn").forEach(b => b.classList.toggle("active", b.dataset.tab === tabId));
      ["tab-programme","tab-committees","tab-members","tab-contact"].forEach(id => {
        const el = document.getElementById(id);
        el.classList.toggle("hide", id !== tabId);
      });
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    $$(".tab-btn").forEach(btn => btn.addEventListener("click", () => openTab(btn.dataset.tab)));

    /***********************
     * PROGRAMME
     ***********************/
    function populateFilters(){
      const types = ["All", ...Array.from(new Set(events.map(e => e.type)))];
      $("#typeFilter").innerHTML = types.map(t => `<option value="${t}">${t}</option>`).join("");

      const locs = ["All", ...Array.from(new Set(events.map(e => e.location)))];
      $("#locationFilter").innerHTML = locs.map(l => `<option value="${l}">${l}</option>`).join("");
    }

    function renderEvents(){
      const q = ($("#searchInput").value || "").trim().toLowerCase();
      const type = $("#typeFilter").value;
      const loc = $("#locationFilter").value;

      const filtered = events.filter(e => {
        const month = monthNameFromISO(e.dateSort).toLowerCase();
        const hay = `${e.type} ${e.location} ${e.dateLabel} ${e.dateSpan} ${month}`.toLowerCase();
        const okQ = !q || hay.includes(q);
        const okT = (type === "All") || (e.type === type);
        const okL = (loc === "All") || (e.location === loc);
        return okQ && okT && okL;
      });

      $("#countEvents").textContent = filtered.length;
      $("#filterHint").textContent =
        (q || type !== "All" || loc !== "All") ? `Filtered results: ${filtered.length} event(s)` : "Showing all events";

      const grid = $("#eventsGrid");
      grid.innerHTML = filtered.map(e => {
        const month = monthNameFromISO(e.dateSort);
        const msg = `Good day ${CHAIRPERSON_NAME}. Please share more information about: ${e.type} (${e.dateSpan}) at ${e.location}.`;
        return `
          <article class="event">
            <div class="event-top">
              <div>
                <h4>${e.type}</h4>
                <div class="meta">üìç ${e.location} ‚Ä¢ üóìÔ∏è ${e.dateSpan} ‚Ä¢ ${month}</div>
              </div>
              <div class="pill">#${e.order}</div>
            </div>

            <div class="event-actions">
              <button class="mini info" onclick="alert('Event: ${e.type}\\nDate: ${e.dateSpan}\\nLocation: ${e.location}')">‚ÑπÔ∏è Details</button>
              <a class="mini whats" href="${waLink(CHAIRPERSON_WHATSAPP, msg)}" target="_blank" rel="noopener">üü¢ More Info</a>
            </div>
          </article>
        `;
      }).join("");

      if (!filtered.length){
        grid.innerHTML = `<div class="muted" style="padding:12px;">No events found. Try another search or set filters back to ‚ÄúAll‚Äù.</div>`;
      }
    }

    /***********************
     * COMMITTEES (FILTER TABS)
     ***********************/
    let activeCommitteeKey = committees[0]?.key || "youth";

    function renderCommitteeTabs(){
      const root = $("#committeeTabs");
      root.innerHTML = committees.map(c => `
        <button class="subtab-btn ${c.key === activeCommitteeKey ? "active" : ""}" data-ckey="${c.key}">
          ${c.name}
        </button>
      `).join("");

      root.querySelectorAll(".subtab-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          activeCommitteeKey = btn.dataset.ckey;
          root.querySelectorAll(".subtab-btn").forEach(b => b.classList.toggle("active", b.dataset.ckey === activeCommitteeKey));
          renderCommitteeCard();
        });
      });

      $("#committeeCountHint").textContent = `${committees.length} committees`;
    }

    function renderCommitteeCard(){
      const committee = committees.find(c => c.key === activeCommitteeKey) || committees[0];

      $("#committeeTitle").textContent = committee.name;
      $("#committeeDesc").textContent = committee.desc;

      const tbody = $("#committeeTableBody");
      tbody.innerHTML = (committee.members || []).map(m => `
        <tr>
          <td>${m.position}</td>
          <td>${m.name}</td>
        </tr>
      `).join("") || `<tr><td colspan="2" class="muted">No members yet.</td></tr>`;

      $("#committeeWhats").href = waLink(CHAIRPERSON_WHATSAPP, committee.whatsappMessage);
    }

    /***********************
     * ZONE MEMBERS
     ***********************/
    function renderZoneMembers(){
      const grid = $("#membersGrid");
      grid.innerHTML = zoneMembers.map(m => {
        const msg = `Good day. Please assist me with information for Manyeleti Zone (2026).`;
        return `
          <div class="person">
            <div class="avatar" aria-hidden="true">${initials(m.name)}</div>
            <h4>${m.name}</h4>
            <p>${m.role}</p>
            <div class="actions">
              <a class="mini whats" href="${waLink(m.whatsapp, msg)}" target="_blank" rel="noopener">üü¢ WhatsApp</a>
              <button class="mini info" onclick="alert('${m.name}\\n${m.role}')">‚ÑπÔ∏è Details</button>
            </div>
          </div>
        `;
      }).join("");
    }

    /***********************
     * CONTACT
     ***********************/
    function setupContact(){
      const mainLink = waLink(CHAIRPERSON_WHATSAPP, DEFAULT_WHATSAPP_MESSAGE);
      $("#chairNumberPreview").textContent = `WhatsApp: ${CHAIRPERSON_WHATSAPP}`;

      $("#btnWhatsAppChair").addEventListener("click", () => window.open(mainLink, "_blank", "noopener"));
      $("#btnWhatsAppChair2").addEventListener("click", () => window.open(mainLink, "_blank", "noopener"));

      $("#btnCopyLink").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText(mainLink);
          alert("WhatsApp link copied!");
        }catch(e){
          prompt("Copy this link:", mainLink);
        }
      });

      $("#btnGoProgramme").addEventListener("click", () => openTab("tab-programme"));
    }

    /***********************
     * INIT
     ***********************/
    document.getElementById("yearNow").textContent = new Date().getFullYear();

    populateFilters();
    renderEvents();

    renderCommitteeTabs();
    renderCommitteeCard();

    renderZoneMembers();
    setupContact();

    ["searchInput","typeFilter","locationFilter"].forEach(id => {
      document.getElementById(id).addEventListener("input", renderEvents);
      document.getElementById(id).addEventListener("change", renderEvents);
    });
  </script>
</body>
</html>
